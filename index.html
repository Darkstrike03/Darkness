<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Deep Space Explorer | Gemini 3</title>
    <style>
        body { margin: 0; overflow: hidden; background: #000; font-family: 'Courier New', Courier, monospace; }
        #overlay {
            position: absolute;
            top: 30px;
            left: 30px;
            color: #00f2ff;
            pointer-events: none;
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        .data-stream { font-size: 10px; color: rgba(0, 242, 255, 0.5); }
        .controls {
            position: absolute;
            bottom: 20px;
            right: 20px;
            color: white;
            font-size: 10px;
            text-align: right;
            opacity: 0.6;
        }
    </style>
</head>
<body>

    <div id="overlay">
        <div style="font-size: 20px; font-weight: bold;">Deep Space Simulation</div>
        <div class="data-stream" id="coords">Sector: 0-X9 | Velocity: 0.0004ly/s</div>
    </div>

    <div class="controls">
        LMB: Rotate View<br>
        Scroll: Zoom through Space<br>
        RMB: Pan Camera
    </div>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // --- Core Engine Setup ---
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 5000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        document.body.appendChild(renderer.domElement);

        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true;
        camera.position.set(100, 50, 300);

        // --- 1. The Starfield (Background) ---
        function createStarfield() {
            const starGeo = new THREE.BufferGeometry();
            const starCount = 15000;
            const pos = new Float32Array(starCount * 3);
            for(let i=0; i<starCount*3; i++) pos[i] = (Math.random() - 0.5) * 2000;
            starGeo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            const starMat = new THREE.PointsMaterial({ color: 0xffffff, size: 0.7 });
            const stars = new THREE.Points(starGeo, starMat);
            scene.add(stars);
        }

        // --- 2. The Sun (Star with Glow) ---
        function createSun(x, y, z, color, size) {
            const sunGroup = new THREE.Group();
            const geo = new THREE.SphereGeometry(size, 32, 32);
            const mat = new THREE.MeshBasicMaterial({ color: color });
            const sun = new THREE.Mesh(geo, mat);
            
            // Simple Corona Glow
            const spriteMat = new THREE.SpriteMaterial({
                map: new THREE.TextureLoader().load('https://threejs.org/examples/textures/lensflare/lensflare0.png'),
                color: color, transparent: true, blending: THREE.AdditiveBlending
            });
            const sprite = new THREE.Sprite(spriteMat);
            sprite.scale.set(size*6, size*6, 1);
            
            sunGroup.add(sun, sprite);
            sunGroup.position.set(x, y, z);
            scene.add(sunGroup);
            return sunGroup;
        }

        // --- 3. The Black Hole (Event Horizon & Accretion Disk) ---
        function createBlackHole(x, y, z) {
            const bhGroup = new THREE.Group();
            
            // The Core (Void)
            const coreGeo = new THREE.SphereGeometry(10, 32, 32);
            const coreMat = new THREE.MeshBasicMaterial({ color: 0x000000 });
            const core = new THREE.Mesh(coreGeo, coreMat);
            
            // Accretion Disk (Torus)
            const diskGeo = new THREE.TorusGeometry(25, 5, 2, 100);
            const diskMat = new THREE.MeshBasicMaterial({ 
                color: 0xffaa00, 
                wireframe: true, 
                transparent: true, 
                opacity: 0.5 
            });
            const disk = new THREE.Mesh(diskGeo, diskMat);
            disk.rotation.x = Math.PI / 2;
            
            bhGroup.add(core, disk);
            bhGroup.position.set(x, y, z);
            scene.add(bhGroup);
            return bhGroup;
        }

        // --- 4. A Distant Nebula (Cloud effect) ---
        function createNebula(x, y, z, color) {
            const count = 500;
            const geo = new THREE.BufferGeometry();
            const pos = new Float32Array(count * 3);
            for(let i=0; i<count*3; i++) pos[i] = (Math.random() - 0.5) * 100;
            geo.setAttribute('position', new THREE.BufferAttribute(pos, 3));
            const mat = new THREE.PointsMaterial({
                color: color, size: 8, transparent: true, opacity: 0.1, blending: THREE.AdditiveBlending
            });
            const nebula = new THREE.Points(geo, mat);
            nebula.position.set(x, y, z);
            scene.add(nebula);
        }

        // Initialize Objects
        createStarfield();
        const blueSun = createSun(-200, 0, -100, 0x4488ff, 15);
        const redGiant = createSun(400, 100, -500, 0xff4400, 40);
        const blackHole = createBlackHole(0, 0, 0);
        createNebula(-100, 50, -200, 0xff00ff);
        createNebula(200, -50, 100, 0x00ffff);

        // --- Animation Loop ---
        function animate() {
            requestAnimationFrame(animate);
            const time = Date.now() * 0.001;

            // Animate Black Hole Disk
            blackHole.children[1].rotation.z += 0.02;
            blackHole.children[1].scale.set(1 + Math.sin(time)*0.1, 1 + Math.sin(time)*0.1, 1);

            // Floating movement for suns
            blueSun.position.y = Math.sin(time * 0.5) * 10;
            
            controls.update();
            renderer.render(scene, camera);
        }

        animate();

        // Handle Resize
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });
    </script>
</body>
</html>
